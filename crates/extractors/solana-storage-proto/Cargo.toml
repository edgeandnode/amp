[package]
name = "solana-storage-proto"
description = "Solana Storage Protobuf Definitions (vendored)"
edition.workspace = true
version.workspace = true
license-file.workspace = true

[lib]
crate-type = ["lib"]
name = "solana_storage_proto"

[dependencies]
# Using bincode 1.x for compatibility with solana crates (workspace uses 2.x)
bincode = "1.3"
prost.workspace = true
serde.workspace = true

# Solana dependencies, version should be compatible with solana-datasets
solana-account-decoder = "3.0.10"
solana-hash = "3.0.0"
solana-instruction = "3.0.0"
solana-message = "3.0.0"
solana-pubkey = "3.0.0"
solana-serde = "3.0.0"
solana-signature = { version = "3.0.0", features = ["std"] }
solana-transaction = "3.0.0"
solana-transaction-context = { version = "3.0.0", features = ["serde"] }
solana-transaction-error = "3.0.0"
solana-transaction-status = "3.0.10"

[dev-dependencies]
enum-iterator = "2.0"

# Protobuf code generation dependencies
# Run with: RUSTFLAGS="--cfg gen_proto" cargo check -p solana-storage-proto
[target.'cfg(gen_proto)'.build-dependencies]
prost-build = { workspace = true }
tonic-build = { workspace = true }

[lints.rust]
# Allow the gen_proto cfg flag used for conditional protobuf code generation
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(gen_proto)'] }
