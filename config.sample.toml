# Sample of a configuration. Copy this file and edit it. Set the environment variable `NOZZLE_CONFIG`
# to its location. See the CONFIG.md for more context.
# 
# Note that using a config file is not mandatory. You can alternatively provide some or all values
# through env vars. See the 'Using env vars' section of CONFIG.md for how to do this.
#
# When using filesystem paths, any relative paths will be resolved from the directory of this file.

# Where the extracted datasets are stored.
data_dir = "<config_dir/data>"

# Path to a providers directory. Each provider is configured as a separate toml file in this
# directory. Dataset definitions will reference providers by a relative path to this directory.
providers_dir = "<config_dir/providers>"

# Path to a directory containing dataset definition files.
dataset_defs_dir = "<config_dir/dataset_defs>"

# Connection to the metadata DB. Optional. If not set, a temporary postgres DB will be provided.
# To opt out of this default behavior, set `ALLOW_TEMP_DB` to `false` in the environment.
# By default, temporary DBs will be created and persisted in the OS temp directory.
metadata_db_url = "postgres://<pg_url>"

# Metadata DB configuration (optional)
[metadata_db]
# Database connection URL - alternative to metadata_db_url above
# url = "postgres://<pg_url>"

# Size of the connection pool (default: 10)
# pool_size = 10

# How much memory the server can use in MB. Setting this to 0, the default, means unlimited.
# max_mem_mb = 0

# Paths where DataFusion can create temporary files, enabling spill-to-disk when aggregation or join
# state exceeds the memory limit.
#
# spill_location = []

# Service addresses (optional - defaults shown below)
# Arrow Flight RPC server address
# flight_addr = "0.0.0.0:1602"

# JSON Lines server address  
# jsonl_addr = "0.0.0.0:1603"

# Admin API server address
# admin_api_addr = "0.0.0.0:1610"

# Parquet configuration (optional)
[parquet]
# Compression algorithm: zstd, lz4, gzip, brotli, snappy, uncompressed (default: zstd(1))
# compression = "zstd(1)"

# Enable bloom filters (default: false)
# bloom_filters = false

# Parquet metadata cache size in MB (default: 1024)
# cache_size_mb = 1024

# File compaction configuration (optional)
[compaction]
# Enable or disable the collector (default: false)
# collector_enabled = false

# Enable or disable the compactor (default: false)
# compactor_enabled = false

# The maximum number of concurrent metadata operations (default: 10)
# metadata_concurrency = 10

# The maximum number of concurrent compaction write operations per table (default: 1)
# write_concurrency = 1

# The interval (in seconds) at which to run the garbage collector (default: 60)
# collector_interval_secs = 60

# The interval (in seconds) at which to run the compactor (default: 0)
# compactor_interval_secs = 0

# The duration (in seconds) for which to hold a lock on a table while compacting (default: 3600 = 1 hour)
# file_lock_duration_secs = 3600

# The minimum number of distinct blocks in a set of contiguous files before it is compacted (default: -1)
# block_threshold = -1

# The minimum number of bytes in a set of contiguous files before it is compacted (default: -1)
# byte_threshold = -1

# The minimum number of rows in a set of contiguous files before it is compacted (default: -1)
# row_threshold = -1

# The minimum number of contiguous files to compact at once (default: 2)
# min_file_count = 2
