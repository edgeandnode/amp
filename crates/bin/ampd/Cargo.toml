[package]
name = "ampd"
edition.workspace = true
version.workspace = true
license-file.workspace = true
build = "build.rs"

[features]
# Default features (enabled by default)
default = ["snmalloc"]
# Enable tokio-console support for async runtime introspection and debugging
console-subscriber = ["dep:console-subscriber"]
# Enable snmalloc memory allocator for improved performance
snmalloc = ["dep:snmalloc-rs"]

[dependencies]
amp-config = { path = "../../config" }
amp-data-store = { path = "../../core/data-store" }
amp-datasets-registry = { path = "../../core/datasets-registry" }
amp-object-store = { path = "../../core/object-store" }
amp-providers-registry = { path = "../../core/providers-registry" }
amp-worker-core = { path = "../../core/worker-core" }
clap.workspace = true
common = { path = "../../core/common" }
console-subscriber = { version = "0.5.0", default-features = false, optional = true }
controller = { path = "../../services/controller" }
metadata-db = { path = "../../core/metadata-db" }
metadata-db-postgres = { path = "../../services/metadata-db-postgres" }
monitoring = { path = "../../core/monitoring" }
rustls.workspace = true
server = { path = "../../services/server" }
snmalloc-rs = { version = "0.3.4", optional = true }
thiserror.workspace = true
tokio = { workspace = true, features = ["signal"] }
tracing.workspace = true
worker = { path = "../../services/worker" }

[build-dependencies]
vergen-gitcl = { version = "9.0.0", features = ["build"] }
