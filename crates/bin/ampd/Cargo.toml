[package]
name = "ampd"
edition.workspace = true
version.workspace = true
license-file.workspace = true
build = "build.rs"

[features]
# Default features (enabled by default)
default = ["snmalloc"]
# Enable tokio-console support for async runtime introspection and debugging
console-subscriber = ["dep:console-subscriber"]
# Enable snmalloc memory allocator for improved performance
snmalloc = ["dep:snmalloc-rs"]

[dependencies]
amp-data-store = { path = "../../core/data-store" }
amp-object-store = { path = "../../core/object-store" }
clap.workspace = true
common = { path = "../../core/common" }
amp-config = { path = "../../config" }
console-subscriber = { version = "0.4.1", default-features = false, optional = true }
controller = { path = "../../services/controller" }
amp-dataset-store = { path = "../../core/dataset-store" }
amp-datasets-registry = { path = "../../core/datasets-registry" }
amp-providers-registry = { path = "../../core/providers-registry" }
metadata-db = { path = "../../core/metadata-db" }
monitoring = { path = "../../core/monitoring" }
server = { path = "../../services/server" }
snmalloc-rs = { version = "0.3.4", optional = true }
thiserror.workspace = true
tokio.workspace = true
tracing.workspace = true
worker = { path = "../../services/worker" }

[build-dependencies]
vergen-gitcl = { version = "9.0.0", features = ["build"] }
