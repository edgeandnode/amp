[package]
name = "ampd"
edition.workspace = true
version.workspace = true
license-file.workspace = true
build = "build.rs"

[features]
# Default features (enabled by default)
default = ["snmalloc"]
# Enable tokio-console support for async runtime introspection and debugging
console-subscriber = ["dep:console-subscriber"]
# Enable snmalloc memory allocator for improved performance
snmalloc = ["dep:snmalloc-rs"]

[dependencies]
clap.workspace = true
common = { path = "../../core/common" }
console-subscriber = { version = "0.4.1", default-features = false, optional = true }
controller = { path = "../../services/controller" }
dataset-store = { path = "../../core/dataset-store" }
datasets-common = { path = "../../core/datasets-common" }
dump = { path = "../../core/dump" }
metadata-db = { path = "../../core/metadata-db" }
monitoring = { path = "../../core/monitoring" }
server = { path = "../../services/server" }
snmalloc-rs = { version = "0.3.4", optional = true }
static_assertions.workspace = true
thiserror.workspace = true
tokio.workspace = true
tracing.workspace = true
worker = { path = "../../services/worker" }

[build-dependencies]
vergen-gitcl = { version = "1.0.8", features = ["build"] }
